<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><title>: Dependency Management with Gradle</title><meta content="yes" name="apple-mobile-web-app-capable" /><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style" /><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui" name="viewport" /><link href="reveal.js/css/reveal.css" rel="stylesheet" /><link rel="stylesheet" href="reveal.js/css/theme/gradle.css" id="theme" /><!--This CSS is generated by the Asciidoctor-Reveal.js converter to further integrate AsciiDoc's existing semantic with Reveal.js--><style type="text/css">.reveal div.right {
  float: right;
}

/* callouts */
.conum[data-value] {display:inline-block;color:#fff!important;background-color:rgba(50,150,50,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}</style><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css" /><link href="reveal.js/lib/css/zenburn.css" rel="stylesheet" /><script>var link = document.createElement( 'link' );
link.rel = 'stylesheet';
link.type = 'text/css';
link.href = window.location.search.match( /print-pdf/gi ) ? "reveal.js/css/print/pdf.css" : "reveal.js/css/print/paper.css";
document.getElementsByTagName( 'head' )[0].appendChild( link );</script><!--[if lt IE 9]><script src="reveal.js/lib/js/html5shiv.js"></script><![endif]-->
<link rel="stylesheet" type="text/css" href="reveal.js/css/theme/asciinema-player.css" />
<link rel="stylesheet" type="text/css" href="reveal.js/css/theme/asciinema-theme-gradle.css" />
<link rel="stylesheet" type="text/css" href="reveal.js/css/theme/github-gist.css" />
<script src="reveal.js/css/theme/asciinema-player.js"></script></head><body><div class="reveal"><div class="slides"><section class="title" data-state="title" data-transition="zoom" data-transition-speed="fast" data-background-image="./images/title.jpeg"><h1></h1><h2>Dependency Management with Gradle</h2><div class="preamble"><div class="paragraph"><p><h2>
Part 1 - Fundamentals
</h2></p></div>
<div class="paragraph"><p>CÃ©dric Champeau (@CedricChampeau) &amp; Louis Jacomet (@ljacomet) - Gradle Inc.</p></div></div></section>
<section id="who-are-we"><h2>Who are we?</h2><div class="imageblock" style=""><img src="./images/who-s-who.png" alt="who s who" width="520" height="250" /></div>
<div class="paragraph"><p>Dependency management team</p></div></section>
<section><section id="what-is-gradle" data-background-color="#01303a"><h2>What is Gradle?</h2></section><section id="gradle-s-purpose"><h2>Gradle&#8217;s purpose</h2><div class="paragraph"><p>Gradle is a build and automation tool.</p></div>
<div class="ulist"><ul><li><p>JVM based</p></li><li><p>Implemented in Java</p></li><li><p>100% Free Open Source - Apache Standard License 2.0</p></li></ul></div></section><section id="agnostic-build-system"><h2>Agnostic Build System</h2><div class="ulist"><ul><li><p>Java ecosystem</p><div class="ulist"><ul><li><p>Groovy, Kotlin, Scala, &#8230;&#8203;</p></li></ul></div></li><li><p>Native ecosystem</p><div class="ulist"><ul><li><p>C, C++, Swift, &#8230;&#8203;</p></li></ul></div></li><li><p>Android</p></li><li><p>Misc</p><div class="ulist"><ul><li><p>Python, Go, Asciidoctor, &#8230;&#8203;</p></li></ul></div></li></ul></div></section><section id="gradle-enterprise"><h2>Gradle Enterprise</h2><div class="imageblock" style=""><img src="./images/gradle-enterprise.png" alt="gradle enterprise" width="80%" height="80%" /></div></section></section>
<section><section id="why-dependency-management" data-background-color="#01303a"><h2>Why dependency management?</h2></section><section id="a-long-time-ago"><h2>A long time ago &#8230;&#8203;</h2><pre class="highlight listingblock"><code data-noescape="" class="bash language-bash">&gt; javac -d out *.java
&gt; cd out/
&gt; jar cf ../../lib/project1.jar *.class
&gt; cd ../../project2
&gt; javac -cp ../lib/project1.jar -d out *.class</code></pre></section><section id="then-came-tools"><h2>Then came tools</h2><div class="ulist"><ul><li><p>Helped you build and package</p></li><li><p>Did not handle dependencies</p><div class="ulist"><ul><li><p>Download jars from project website</p></li><li><p>Lived in a <code>lib</code> directory or equivalent</p></li><li><p>Often saved next to code in source control</p></li></ul></div></li></ul></div></section><section id="source-vs-published"><h2>Source vs published</h2><div class="ulist"><ul><li><p>Sources</p><div class="ulist"><ul><li><p>(mostly) reliable</p></li><li><p>(often) slow</p></li><li><p>hard to temper with</p></li><li><p>hard to version</p></li></ul></div></li></ul></div></section><section id="source-vs-published-2"><h2>Source vs published</h2><div class="ulist"><ul><li><p>Binaries</p><div class="ulist"><ul><li><p>Stable</p></li><li><p>Fast (pre-built)</p></li><li><p>Requires trusted sources</p></li><li><p>Not always metadata</p></li></ul></div></li></ul></div></section><section id="growing-ecosystem"><h2>Growing ecosystem</h2><div class="paragraph"><p>With the growing popularity of Java and the growth of its ecosystem,
managing all dependencies of a project turns into a dependency chase.</p></div></section><section id="thus-dependency-management"><h2>Thus dependency management &#8230;&#8203;</h2><div class="ulist"><ul><li><p>Ivy or Maven would take care of your dependencies</p><div class="ulist"><ul><li><p>Libraries have known coordinates</p></li><li><p>Published to repositories, with metadata in addition of the binary</p></li><li><p>Automated the transitive aspect of dependency management</p></li></ul></div></li></ul></div></section><section id="metadata-maven-maven-central"><h2>Metadata: Maven != Maven Central</h2><div class="ulist"><ul><li><p>Maven: a build tool</p></li><li><p>Maven <strong>POM</strong>: a metadata format</p></li><li><p>Maven <strong>repositories</strong>: Places where you can find binaries, with Maven metadata</p></li></ul></div></section><section id="and-gradle-joins-the-party"><h2>And Gradle joins the party</h2><div class="ulist"><ul><li><p>Compatible with all of the previous options</p><div class="ulist"><ul><li><p><code>lib</code> or custom repositories</p></li><li><p>Ivy metadata</p></li><li><p>Maven metadata</p></li><li><p>Gradle Module Metadata (<a href="https://blog.gradle.org/gradle-metadata-1.0">since 5.3</a>)</p></li><li><p>and more &#8230;&#8203;</p></li></ul></div></li></ul></div></section></section>
<section id="demo" data-background-color="#01303a"><h2>Demo</h2></section>
<section><section id="getting-dependencies" data-background-color="#01303a"><h2>Getting dependencies</h2></section><section id="from-a-repository-to-your-machine"><h2>From a repository to your machine</h2><div class="paragraph"><p>Gradle attaches importance to the source of a dependency, its origin repository.</p></div>
<div class="paragraph"><p>Gradle has lots of smarts in order to optimise the downloading of files.</p></div></section><section id="repositories"><h2>Repositories</h2><div class="ulist"><ul><li><p>Order of repositories <em>is important</em></p></li><li><p>Use repository filtering for partitioning sources</p></li><li><p>Avoid <em>mavenLocal()</em></p><div class="ulist"><ul><li><p>Not strictly a repository, but a cache for Maven</p></li><li><p>Sometimes contains partial module data, this will trip Gradle</p></li></ul></div></li><li><p>Metadata and artifacts downloaded concurrently</p></li></ul></div></section><section id="how-gradle-searches-for-binaries"><h2>How Gradle searches for binaries</h2><div class="ulist"><ul><li><p>Gradle <em>knows</em> where an artifact comes from</p></li><li><p>Get the SHA1 of the artifact (GET or HEAD)</p></li><li><p>Looks in its dependency cache if something at the same GAV has the same hash</p><div class="ulist"><ul><li><p>If so, uses it</p></li></ul></div></li><li><p>Can leverage local maven repository content instead of downloading</p><div class="ulist"><ul><li><p>That is transparent, and different than having <code>mavenLocal()</code> declared as a repository</p></li></ul></div></li></ul></div>
<div class="paragraph"><p>Consequence: if you get a file from <em>Maven Central</em>, then you change the repository to <em>JCenter</em>, if the artifacts are the same, downloaded only once.</p></div></section></section>
<section><section id="core-concepts" data-background-color="#01303a"><h2>Core concepts</h2></section><section id="definitions"><h2>Definitions</h2><div class="ulist"><ul><li><p><strong>Module</strong></p><div class="ulist"><ul><li><p>A piece of software that evolves over time</p></li><li><p>Has a group, name and version to identify it</p></li><li><p>Example: <code>org.slf4j:slf4j-api:1.7.2</code></p></li></ul></div></li><li><p><strong>Configuration</strong><br />
In the context of dependency management, and for most users:</p><div class="ulist"><ul><li><p>Named set of dependencies</p></li><li><p>Provides access to resolved modules and their artifacts</p></li><li><p>Example: <code>implementation</code></p></li></ul></div></li></ul></div></section><section id="api-and-implementation"><h2>API and implementation</h2><div class="imageblock" style=""><img src="./images/configurations/bucket.png" alt="bucket" width="100%" height="100%" /></div></section><section id="more-bucket-configurations"><h2>More bucket configurations</h2><div class="imageblock" style=""><img src="./images/configurations/bucket_2.png" alt="bucket 2" width="100%" height="100%" /></div></section><section id="bucket-configurations-relationship"><h2>Bucket configurations relationship</h2><div class="imageblock" style=""><img src="./images/configurations/bucket_3.png" alt="bucket 3" width="100%" height="100%" /></div></section><section id="api-vs-implementation"><h2>API vs implementation</h2><div class="ulist"><ul><li><p>To <em>build</em> a module, you need:</p><div class="ulist"><ul><li><p><code>api</code>, <code>implementation</code> and <code>compileOnly</code> dependencies</p></li></ul></div></li><li><p>To <em>run</em> a module, you need:</p><div class="ulist"><ul><li><p><code>api</code>, <code>implementation</code> and <code>runtimeOnly</code> dependencies</p></li></ul></div></li></ul></div></section><section id="classpath-configurations"><h2>Classpath configurations</h2><div class="imageblock" style=""><img src="./images/configurations/classpath.png" alt="classpath" width="100%" height="700" /></div></section><section id="api-vs-implementation-transitively"><h2>API vs implementation transitively</h2><div class="ulist"><ul><li><p>To <em>build against</em> a module, you need:</p><div class="ulist"><ul><li><p>transitive <code>api</code> dependencies</p></li></ul></div></li><li><p>To <em>run against</em> a module, you need:</p><div class="ulist"><ul><li><p>transitive <code>api</code>, <code>implementation</code> and <code>runtimeOnly</code> dependencies</p></li></ul></div></li></ul></div></section><section id="elements-configurations"><h2>Elements configurations</h2><div class="imageblock" style=""><img src="./images/configurations/complete.png" alt="complete" width="100%" height="700" /></div></section><section id="configurations"><h2>Configurations</h2><div class="ulist"><ul><li><p>3 kinds of configurations</p><div class="ulist"><ul><li><p>"buckets" of dependencies</p></li><li><p>resolvable configurations</p></li><li><p>consumable configurations</p></li></ul></div></li></ul></div></section><section id="buckets-of-dependencies"><h2>Buckets of dependencies</h2><div class="ulist"><ul><li><p>A named list of dependencies</p></li><li><p><code>canBeConsumed=false</code><br />
<code>canBeResolved=false</code></p></li></ul></div></section><section id="resolvable-configurations"><h2>Resolvable configurations</h2><div class="ulist"><ul><li><p>Represents a <em>consumer</em></p></li><li><p>For a specific <em>usage</em> (compiling, runtime, &#8230;&#8203;)</p></li><li><p>Extends from one or more bucket(s)</p></li><li><p><code>canBeConsumed=false</code><br />
<code>canBeResolved=true</code></p></li></ul></div></section><section id="consumable-configurations"><h2>Consumable configurations</h2><div class="ulist"><ul><li><p>Represents a variant of a <em>producer</em></p></li><li><p>Attaches <em>artifacts</em></p></li><li><p>Extends from one or more bucket</p></li><li><p><code>canBeConsumed=true</code><br />
<code>canBeResolved=false</code></p></li></ul></div></section><section id="matching-consumers-with-producers"><h2>Matching consumers with producers</h2><div class="paragraph"><p>Gradle needs a way to perform the matching between consumers and producers.</p></div>
<div class="paragraph"><p>Attributes and variants are the answer.</p></div></section><section id="more-definitions"><h2>More definitions</h2><div class="ulist"><ul><li><p><strong>Attribute</strong></p><div class="ulist"><ul><li><p>Named</p></li><li><p>Typed</p></li><li><p>Can have compatibility and disambiguation rules</p></li></ul></div></li><li><p><strong>Variant</strong></p><div class="ulist"><ul><li><p>A consumable form of a module</p></li><li><p>Declare artifacts and / or dependencies</p></li><li><p>Identified by its attributes and their values</p></li></ul></div></li></ul></div></section><section id="compilation-against-project"><h2>Compilation against project</h2><div class="imageblock" style=""><img src="./images/consumer/compile1.png" alt="compile1" width="100%" height="700" /></div></section><section id="compilation-against-project-2"><h2>Compilation against project</h2><div class="imageblock" style=""><img src="./images/consumer/compile2.png" alt="compile2" width="100%" height="700" /></div></section><section id="compilation-against-project-3"><h2>Compilation against project</h2><div class="imageblock" style=""><img src="./images/consumer/compile3.png" alt="compile3" width="100%" height="700" /></div></section><section id="compilation-against-project-api"><h2>Compilation against project API</h2><div class="imageblock" style=""><img src="./images/consumer/compileapi1.png" alt="compileapi1" width="100%" height="700" /></div></section><section id="compilation-against-project-api-2"><h2>Compilation against project API</h2><div class="imageblock" style=""><img src="./images/consumer/compileapi2.png" alt="compileapi2" width="100%" height="700" /></div></section><section id="compilation-against-project-api-3"><h2>Compilation against project API</h2><div class="imageblock" style=""><img src="./images/consumer/compileapi3.png" alt="compileapi3" width="100%" height="700" /></div></section><section id="runtime-against-project"><h2>Runtime against project</h2><div class="imageblock" style=""><img src="./images/consumer/runtime1.png" alt="runtime1" width="100%" height="700" /></div></section><section id="runtime-against-project-2"><h2>Runtime against project</h2><div class="imageblock" style=""><img src="./images/consumer/runtime2.png" alt="runtime2" width="100%" height="700" /></div></section><section id="runtime-against-project-3"><h2>Runtime against project</h2><div class="imageblock" style=""><img src="./images/consumer/runtime3.png" alt="runtime3" width="100%" height="700" /></div></section><section id="runtime-against-project-4"><h2>Runtime against project</h2><div class="imageblock" style=""><img src="./images/consumer/runtime4.png" alt="runtime4" width="100%" height="700" /></div></section><section id="against-external-dependency"><h2>Against external dependency</h2><div class="imageblock" style=""><img src="./images/consumer/external.png" alt="external" width="100%" height="700" /></div></section><section id="gradle-attributes"><h2>Gradle attributes</h2><div class="ulist"><ul><li><p><code>org.gradle.usage</code>: indicates the <em>usage</em> of a variant</p><div class="ulist"><ul><li><p>Example: <code>java-api</code> or <code>java-runtime</code></p></li></ul></div></li><li><p><code>org.gradle.category</code>: indicates the <em>category</em> of a component</p><div class="ulist"><ul><li><p>Example: <code>library</code> or <code>platform</code></p></li></ul></div></li><li><p><code>org.gradle.dependency.bundling</code>: indicates how <em>dependencies</em> are handled</p><div class="ulist"><ul><li><p>Example: <code>regular</code> or <code>embedded</code></p></li></ul></div></li></ul></div></section><section id="gradle-jvm-attributes"><h2>Gradle JVM attributes</h2><div class="ulist"><ul><li><p><code>org.gradle.jvm.version</code>: indicates the minimal JVM version compatibility</p><div class="ulist"><ul><li><p>Example: <code>6</code>, <code>9</code> or <code>12</code></p></li></ul></div></li></ul></div></section><section id="usage-of-attributes"><h2>Usage of attributes</h2><div class="ulist"><ul><li><p>Can be declared on configurations</p><div class="ulist"><ul><li><p>Defines an <em>expected</em> value on resolvable</p></li><li><p>Defines an <em>exposed</em> value on consumable</p></li></ul></div></li><li><p>Can be declared on dependencies</p><div class="ulist"><ul><li><p>Overrides the configuration value (if set)</p></li></ul></div></li><li><p>Can be declared when retrieving artifact</p></li></ul></div></section><section id="semantics-and-dependencies"><h2>Semantics and dependencies</h2><div class="paragraph"><p>Gradle has a strong modelling of dependencies:</p></div>
<div class="ulist"><ul><li><p>Semantic difference between compilation and runtime</p></li><li><p>Semantic difference between building a library and building <em>against</em> a library</p></li><li><p>Ability for a module to produce more than one variant</p></li></ul></div></section></section>
<section><section id="controlling-dependency-versions" data-background-color="#01303a"><h2>Controlling dependency versions</h2></section><section id="rich-version-constraints"><h2>Rich version constraints</h2></section><section id="meaning-of-versions"><h2>Meaning of versions</h2><div class="ulist"><ul><li><p>What does it mean to say: "I depend on 1.1"</p></li><li><p>Does it mean it doesn&#8217;t work using 1.0?</p></li><li><p>Implicit statement: "I should work with 1.1+"</p></li><li><p>What if it&#8217;s not true?</p></li></ul></div></section><section id="meaning-of-versions-2"><h2>Meaning of versions</h2><div class="ulist"><ul><li><p>Use <code>latest.release</code>?</p></li><li><p>Dependency on <code>1.2-beta-3</code>: is <code>beta</code> important?</p></li><li><p>Dependency on snapshots&#8230;&#8203;</p></li></ul></div></section><section id="enter-rich-version-constraints"><h2>Enter rich version constraints</h2><pre class="highlight listingblock"><code data-noescape="" class="groovy language-groovy">dependencies {
   implementation(project(":gitutils"))
   implementation("info.picocli:picocli") {
       version {
          strictly("[3.9, 4.0[")
          prefer("3.9.5")
       }
       because("Provides command-line argument parsing")
   }
}</code></pre></section><section id="version-constraints"><h2>Version constraints</h2><div class="ulist"><ul><li><p>Legacy notation (without <code>version</code> block) translates to <code>require</code></p></li><li><p><code>require</code>: doesn&#8217;t accept any lower version, upgrades are acceptable</p></li><li><p><code>strictly</code>: if any other version in the graph disagrees, fails</p></li><li><p><code>prefer</code>: weak constraint, if nobody else cares, choose this version</p></li></ul></div></section><section id="how-to-choose"><h2>How to choose?</h2><div class="imageblock" style=""><img src="./images/rich-versions-1.png" alt="rich versions 1" width="1280" height="562" /></div></section><section id="how-to-choose-2"><h2>How to choose?</h2><div class="imageblock" style=""><img src="./images/rich-versions-2.png" alt="rich versions 2" width="1280" height="459" /></div></section><section id="special-versions"><h2>Special versions</h2><div class="ulist"><ul><li><p>Snapshots</p></li><li><p>Ranges (<code>[1.0, [</code>, <code>[1.1, 1.4]</code>, &#8230;&#8203;)</p></li><li><p>Head selectors (<code>latest.release</code>, <code>latest.integration</code>)</p></li><li><p>Cached to avoid too many repository lookups</p></li></ul></div></section><section id="control-over-dynamic-versions"><h2>Control over dynamic versions</h2><pre class="highlight listingblock"><code data-noescape="" class="groovy language-groovy">    configurations.all {
        resolutionStrategy.cacheDynamicVersionsFor 0, 'seconds'
    }</code></pre>
<div class="ulist"><ul><li><p>Warning: significant impact on performance!</p></li></ul></div></section><section id="control-over-dynamic-versions-2"><h2>Control over dynamic versions</h2><div class="ulist"><ul><li><p><code>--refresh-dependencies</code>: has impact <strong>only on dynamic/changing modules</strong></p></li><li><p>Absolutely no relationship with Maven local repository or Gradle artifact cache</p></li></ul></div></section><section id="dependency-locking"><h2>Dependency locking</h2><div class="paragraph"><p>If you use dynamic versions (<code>[1.0, [</code>, <code>1.+</code>, <code>latest.release</code>, &#8230;&#8203;):</p></div>
<div class="ulist"><ul><li><p>Builds become <em>non reproducible</em></p></li><li><p>Solution: dependency locking</p></li></ul></div></section><section id="dependency-locking-2"><h2>Dependency locking</h2><div class="ulist"><ul><li><p>Lock a single configuration</p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape="" class="kotlin language-kotlin">configurations {
   compileClasspath {
      resolutionStrategy.activateDependencyLocking()
   }
}</code></pre></section><section id="dependency-locking-3"><h2>Dependency locking</h2><div class="ulist"><ul><li><p>Convenience for locking <em>all</em> configurations</p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape="" class="kotlin language-kotlin">dependencyLocking {
    lockAllConfigurations()
}</code></pre></section></section>
<section><section id="controlling-dependency-versions-dependency-constraints" data-background-color="#01303a"><h2>Controlling dependency versions: dependency constraints</h2></section><section id="direct-dependencies-vs-transitive-dependencies"><h2>Direct dependencies vs transitive dependencies</h2><div class="ulist"><ul><li><p>Should be used to tell something about the project itself</p><div class="ulist"><ul><li><p>What you <em>directly</em> use in code</p></li></ul></div></li><li><p>What if you need to say something about a <em>transitive dependency</em>?</p></li></ul></div></section><section id="dependency-constraints"><h2>Dependency constraints</h2><div class="ulist"><ul><li><p>A <em>dependency constraint</em> tells something about modules found in the graph</p></li><li><p>Doesn&#8217;t matter <em>how deep</em> in the graph they are</p></li><li><p>Can be used to upgrade transitives</p></li><li><p>Affects resolution result <strong>if and only if</strong> module seen in graph</p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape="" class="groovy language-groovy">dependencies {
    constraints {
        implementation("org.slf4j:slf4j-api:1.7.26")
    }
}</code></pre></section><section id="dependency-constraints-2"><h2>Dependency constraints</h2><div class="ulist"><ul><li><p>Can be used to implement <em>recommendations</em></p></li></ul></div>
<pre class="highlight listingblock"><code data-noescape="" class="groovy language-groovy">dependencies {
    constraints {
        implementation("org.slf4j:slf4j-api:1.7.26")
        implementation("org.apache:commons-lang3:3.3.0")
    }
    dependencies {
        implementation("org.slf4j:slf4j-api") // no version
    }
}</code></pre></section><section id="dependency-constraints-3"><h2>Dependency constraints</h2><div class="ulist"><ul><li><p>Participate in the graph</p></li><li><p>They <strong>do not</strong> override preferences</p><div class="ulist"><ul><li><p>They introduce additional constraints on versions</p></li><li><p>Conflict resolution discussed in 2d part of webinar</p></li></ul></div></li></ul></div></section></section>
<section><section id="structuring-your-build" data-background-color="#01303a"><h2>Structuring your build</h2></section><section id="use-case-commons-dependencies"><h2>Use case: commons dependencies</h2><div class="ulist"><ul><li><p>Often subprojects in a repository have to share the same versions</p></li><li><p>How can we:</p><div class="ulist"><ul><li><p>Define common dependency versions</p></li><li><p>Share the result</p></li></ul></div></li></ul></div></section><section id="meet-the-java-platform-plugin"><h2>Meet the Java Platform plugin</h2><div class="ulist"><ul><li><p>A Java Platform defines a <em>set of dependency constraints</em></p></li><li><p>May have different <em>api</em> and <em>runtime</em> constraints</p></li><li><p><em>Optionally</em> defines dependencies</p></li></ul></div></section><section id="step-1-define-a-java-platform-subproject"><h2>Step 1: define a Java Platform subproject</h2><div class="title">platform/build.gradle.kts</div><pre class="highlight listingblock"><code data-noescape="" class="kotlin language-kotlin">plugins {
   `java-platform`
}

dependencies {
    constraints {
       api("org.slf4j:slf4j-api:1.7.26")
       api("org.slf4j:slf4j-simple:1.7.26")
    }
}</code></pre></section><section id="step-2-refactor-subprojects"><h2>Step 2: refactor subprojects</h2><div class="title">cli/build.gradle.kts</div><pre class="highlight listingblock"><code data-noescape="" class="kotlin language-kotlin">dependencies {
   api(platform(project(":platform")))

   implementation("org.slf4j:slf4j-api") // &lt;-- no version here
}</code></pre></section><section id="step-3-extract-versions"><h2>Step 3: extract versions</h2><div class="title">platform/build.gradle.kts</div><pre class="highlight listingblock"><code data-noescape="" class="kotlin language-kotlin">plugins {
   `java-platform`
}

// May be moved to `buildSrc`
object Deps {
   val slf4jVersion = "1.7.26"
}

dependencies {
    constraints {
       api("org.slf4j:slf4j-api:${Deps.slf4jVersion}")
       api("org.slf4j:slf4j-simple:${Deps.slf4jVersion}")
    }
}</code></pre></section><section id="publication"><h2>Publication</h2><div class="ulist"><ul><li><p>When published, platforms are similar to Maven BOMs</p></li><li><p>Actually <em>published as BOMs</em> for Maven consumers</p></li><li><p>and published "as is" for Gradle consumers</p></li></ul></div></section></section>
<section><section id="wrap-up" data-background-color="#01303a"><h2>Wrap up</h2></section><section id="documentation-links"><h2>Documentation links</h2><div class="ulist"><ul><li><p><a href="https://docs.gradle.org/current/userguide/introduction_dependency_management.html">Dependency management section</a></p></li><li><p><a href="https://docs.gradle.org/current/userguide/declaring_repositories.html#declaring_repositories">Declaring repositories</a></p></li><li><p><a href="https://docs.gradle.org/current/userguide/dependency_cache.html#dependency_cache">Understanding the dependency cache</a></p></li><li><p><a href="https://docs.gradle.org/current/userguide/declaring_dependencies.html#sub:declaring_dependency_rich_version">Rich version constraints</a></p></li><li><p><a href="https://scans.gradle.com">Build scans</a></p></li><li><p>Request a personal demo of Gradle Enterprise at <a href="https://gradle.com/enterprise/contact" class="bare">https://gradle.com/enterprise/contact</a></p></li></ul></div></section><section id="sneak-peak-at-part-2"><h2>Sneak peak at Part 2</h2><div class="ulist"><ul><li><p>Handling version conflicts</p></li><li><p>Dealing with bad metadata</p></li><li><p>Dependency alignment</p></li><li><p>Capabilities</p></li><li><p>Resolution rules</p></li><li><p>&#8230;&#8203;</p></li></ul></div>
<div class="paragraph"><p>To be confirmed: June 6th</p></div></section></section>
<section id="questions" data-background-color="#01303a"><h2>Questions?</h2></section></div></div><script src="reveal.js/lib/js/head.min.js"></script><script src="reveal.js/js/reveal.js"></script><script>Array.prototype.slice.call(document.querySelectorAll('.slides section')).forEach(function(slide) {
  if (slide.getAttribute('data-background-color')) return;
  // user needs to explicitly say he wants CSS color to override otherwise we might break custom css or theme (#226)
  if (!(slide.classList.contains('canvas') || slide.classList.contains('background'))) return;
  var bgColor = getComputedStyle(slide).backgroundColor;
  if (bgColor !== 'rgba(0, 0, 0, 0)' && bgColor !== 'transparent') {
    slide.setAttribute('data-background-color', bgColor);
    slide.style.backgroundColor = 'transparent';
  }
})

// See https://github.com/hakimel/reveal.js#configuration for a full list of configuration options
Reveal.initialize({
  // Display presentation control arrows
  controls: true,
  // Help the user learn the controls by providing hints, for example by
  // bouncing the down arrow when they first encounter a vertical slide
  controlsTutorial: true,
  // Determines where controls appear, "edges" or "bottom-right"
  controlsLayout: 'bottom-right',
  // Visibility rule for backwards navigation arrows; "faded", "hidden"
  // or "visible"
  controlsBackArrows: 'faded',
  // Display a presentation progress bar
  progress: true,
  // Display the page number of the current slide
  slideNumber: 'true',
  // Control which views the slide number displays on
  showSlideNumber: 'all',
  // Push each slide change to the browser history
  history: true,
  // Enable keyboard shortcuts for navigation
  keyboard: true,
  // Enable the slide overview mode
  overview: true,
  // Vertical centering of slides
  center: true,
  // Enables touch navigation on devices with touch input
  touch: true,
  // Loop the presentation
  loop: false,
  // Change the presentation direction to be RTL
  rtl: false,
  // Randomizes the order of slides each time the presentation loads
  shuffle: false,
  // Turns fragments on and off globally
  fragments: true,
  // Flags whether to include the current fragment in the URL,
  // so that reloading brings you to the same fragment position
  fragmentInURL: false,
  // Flags if the presentation is running in an embedded mode,
  // i.e. contained within a limited portion of the screen
  embedded: false,
  // Flags if we should show a help overlay when the questionmark
  // key is pressed
  help: true,
  // Flags if speaker notes should be visible to all viewers
  showNotes: false,
  // Global override for autolaying embedded media (video/audio/iframe)
  // - null: Media will only autoplay if data-autoplay is present
  // - true: All media will autoplay, regardless of individual setting
  // - false: No media will autoplay, regardless of individual setting
  autoPlayMedia: null,
  // Number of milliseconds between automatically proceeding to the
  // next slide, disabled when set to 0, this value can be overwritten
  // by using a data-autoslide attribute on your slides
  autoSlide: 0,
  // Stop auto-sliding after user input
  autoSlideStoppable: true,
  // Use this method for navigation when auto-sliding
  autoSlideMethod: Reveal.navigateNext,
  // Specify the average time in seconds that you think you will spend
  // presenting each slide. This is used to show a pacing timer in the
  // speaker view
  defaultTiming: 120,
  // Enable slide navigation via mouse wheel
  mouseWheel: false,
  // Hides the address bar on mobile devices
  hideAddressBar: true,
  // Opens links in an iframe preview overlay
  // Add `data-preview-link` and `data-preview-link="false"` to customise each link
  // individually
  previewLinks: false,
  // Transition style (e.g., none, fade, slide, convex, concave, zoom)
  transition: 'fade',
  // Transition speed (e.g., default, fast, slow)
  transitionSpeed: 'default',
  // Transition style for full page slide backgrounds (e.g., none, fade, slide, convex, concave, zoom)
  backgroundTransition: 'fade',
  // Number of slides away from the current that are visible
  viewDistance: 3,
  // Parallax background image (e.g., "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'")
  parallaxBackgroundImage: '',
  // Parallax background size in CSS syntax (e.g., "2100px 900px")
  parallaxBackgroundSize: '',
  // Number of pixels to move the parallax background per slide
  // - Calculated automatically unless specified
  // - Set to 0 to disable movement along an axis
  parallaxBackgroundHorizontal: null,
  parallaxBackgroundVertical: null,
  // The display mode that will be used to show slides
  display: 'block',

  // The "normal" size of the presentation, aspect ratio will be preserved
  // when the presentation is scaled to fit different resolutions. Can be
  // specified using percentage units.
  width: 960,
  height: 700,

  // Factor of the display size that should remain empty around the content
  margin: 0.1,

  // Bounds for smallest/largest possible scale to apply to content
  minScale: 0.2,
  maxScale: 1.5,

  // Optional libraries used to extend on reveal.js
  dependencies: [
      { src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
      { src: 'reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
      { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true },
      { src: 'reveal.js/plugin/notes/notes.js', async: true },
      
      
      
      
  ],

  

});</script><!-- this currently shows up at the wrong location in the final index.html which means the style font is not properly applied-->

<div class="footer">
</div></body></html>